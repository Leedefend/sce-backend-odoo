那就把这套“宇宙设想”收束成一个对外可用的产品文档。下面是一版可以直接拿去给甲方、领导、投资人看的正式版（偏产品白皮书 / 方案说明书风格），内容基于你刚刚那份长文做了结构化、命名和话术收敛。

---

# 🏗 智能工程管理系统 · 专业版 WBS 体系

**——面向造价 / 成本 / 合同 / 结算 / 执行一体化的数字底座**

版本：v1.0
适用工程类型：房建、市政、机电、装饰、景观等
适用阶段：可研、概算、预算、招投标、合同、施工、结算、决算全流程

---

## 1. 产品定位与总体目标

### 1.1 产品定位

本产品是一套以“专业版 WBS 体系”为核心的工程项目管理数字底座，面向施工企业、投资建设单位、工程总承包商等用户，提供从工程量清单（BOQ）到 WBS 结构、再到成本、进度、质量、安全与合同的全流程一体化管理能力。

系统核心定位：

* **工程成本中心的唯一结构主线**
  预算、合同、变更、结算、成本台账、支付与回款全部围绕同一棵 WBS 树展开。
* **AI 友好的结构体系**
  所有关键对象（清单、合同、台账、进度、质量、安全等）均绑定结构化标识，方便 AI 做结构化解析、自动分析与决策建议。
* **“五算对比 + 变更签证 + 证据链”一体化平台**
  从概算、预算、标后、合同到决算，全程可追溯、可对比、可复盘。

### 1.2 行业标准对齐

产品严格对齐并兼容以下行业标准和主流做法：

* 《建设工程工程量清单计价规范》（GB 50500–2013）及 F1.1 / F1.2 / F1.3 表格体系
* 《全国统一建设工程计量规范》系列专业规范
* 投标工程量清单通用格式
* PMBOK WBS 分解原则、CBS（成本分解结构）、OBS（组织分解结构）
* 可扩展对接主流造价软件（广联达、新点等）及政府监管平台

### 1.3 产品总体目标

* 建立统一、标准化、可计算、可追溯的工程结构与费用体系；
* 支撑预算、合同、变更、结算、成本台账、进度计量、质量、安全的全过程管理；
* 为 AI 决策提供高质量、结构化的“工程数据资产”，实现进度 × 质量 × 安全 × 成本的一体化智能驾驶舱。

---

## 2. 专业版 WBS 体系：统一的工程结构底座

### 2.1 WBS 总体结构

系统将工程项目结构统一为六大层级、七类节点：

**结构层级（示例）：**

* L1：单项工程（Project Division）
* L2：单位工程（Unit Project）
* L3：专业工程（建筑 / 机电 / 装饰 / 景观等）
* L4：分部工程（如土石方、模板、砌筑等）
* L5：分项工程 / 清单项目（可计量的工程实体）
* L6：措施 / 规费 / 税金 / 其他费用节点（费用结构）

**节点类型（统一编码）：**

* `project`：项目根节点
* `single`：单项工程
* `unit`：单位工程
* `major`：专业工程
* `division`：分部工程
* `item`：清单项
* `measure`：措施项目（单价 / 总价）
* `fee`：规费
* `tax`：税金
* `other`：其他费用
* `total`：汇总 / 总计节点

通过统一的结构类型 `structure_type`，系统同时承载两类语义：

* **工程逻辑结构**：按施工组织分解（谁先谁后，谁依赖谁）；
* **成本归集结构**：按造价体系归集（分部分项 / 措施 / 规费 / 税金等）。

### 2.2 BOQ 分类体系（boq_category）

为兼容清单计价规范及各类导入文件，系统预置 6 大清单类别：

* `boq`：分部分项工程
* `unit_measure`：单价措施项目
* `total_measure`：总价措施项目
* `fee`：规费
* `tax`：税金
* `other`：其他费用

**识别规则**（可配置）：

* Sheet 名：F1.1 / F1.2 / F1.3 → 自动识别类别
* 名称关键字：脚手架、垂直运输、安全文明等 → 匹配到对应类别
* 编码范围：对接企业自定义编码段（如 01 建筑、02 装饰、100X 措施、900X 规费税金）

**作用：**

* 清单导入时即可自动归类；
* 与 WBS 节点层级对应，形成完整的“工程量结构 + 费用结构”统一视图；
* 为后续成本管控、变更签证、五算对比、AI 分析提供基础。

### 2.3 清单 → WBS 自动生成算法

系统内置“从 project.boq.line 自动生成 WBS 树”的算法：

* 按项目 / 单位工程维度聚合；
* 分部分项（boq）、措施（unit_measure / total_measure）、规费（fee）、税金（tax）、其他（other）分别挂接到各自的结构分区；
* 确保**叶子节点永远是清单项**，方便工程量、成本与进度的精确对齐；
* 支持幂等再生成：同一清单多次导入、不重复建树，支持“清空后重建”策略。

---

## 3. 全生命周期成本与进度控制模型

本系统以 WBS 为唯一主线，构建“成本三条线 + 进度三来源 + 六条控制线”的完整模型。

### 3.1 成本三条线

1. **预算成本线（Budget）**

   * 来源：清单 BOQ + 措施 / 规费 / 税金计价
   * 用途：目标成本控制

2. **合同成本线（Contract）**

   * 来源：中标合同 + 已批准变更
   * 用途：收入与执行的基本盘

3. **实际成本线（Actual）**

   * 来源：材料、分包、人工、机械、其他费用等成本台账
   * 用途：反映真实消耗、支持盈亏分析与预测

所有成本线都通过 `structure_id` 回写 WBS 节点，支持从清单到分项、分部、单位工程、项目的逐级聚合。

### 3.2 六条“控制线”

系统通过六条核心控制线构建动态成本管理体系：

* 预算成本线（Budget）
* 合同成本线（Contract）
* 结算成本线（Settlement Target）
* 计划成本线（Planned Cost，对应进度计划）
* 实际成本线（Actual Cost）
* 完工预测成本线（EAC, Estimate At Completion）

配合挣值管理（EVMS）相关指标（EV / PV / AC / SV / CV / CPI / SPI），形成可量化的进度-成本联动控制框架。

### 3.3 进度管理：工程量驱动的甘特 与 挣值

* **进度任务（Task）**：绑定 WBS 节点，支持 FS/SS/FF/SF 等依赖关系，内置关键路径计算（CPM）；
* **工程量计量（Progress Entry）**：每条计量必须绑定清单 / WBS 叶子节点；
* **进度百分比**：由工程量驱动，而非主观比例；
* **产值与挣值**：自动根据合同单价计算本期 / 累计产值，形成 EV；
* **资源负荷**：支持按劳务 / 机械 / 材料 / 施工面进行资源负荷分析。

通过这一整套模型，系统可以实现：

* 甘特图 + S 曲线（PV / EV / AC）可视化；
* 进度滞后预警、赶工成本评估；
* 进度、产值、成本、现金流四者联动。

---

## 4. 合同管理：主合同 × 分包合同 × 采购合同 × 变更 × 计量 × 结算

### 4.1 合同体系四层结构

* **收入合同**：主合同 + 补充协议
* **成本合同**：分包、劳务、材料采购、机械租赁、专业服务
* **内部约定**：内部承包 / 责任书
* **结算协议**：中间计量、竣工结算、终结协议

所有合同行均以 WBS / BOQ 为基础，按清单行维度进行拆分和对齐。

### 4.2 合同清单强绑定 WBS

每一条合同行都具备：

* `structure_id`（WBS 节点）
* `boq_line_id`（对应清单行）
* 单价 / 工程量 / 合价信息

这样可以直接实现：

* 主合同 vs 分包合同 对比（合同毛利）；
* 合同比较（预算 vs 合同 vs 结算 vs 实际成本）；
* 计量产值自动计算；
* 风险节点快速定位和分析。

### 4.3 变更与签证：偏差的证据层

产品内置完整的“变更管理 + 现场签证”体系：

* **变更单**：设计变更、现场签证、材料调整、范围变化等；
* **变更行**：绑定清单 / WBS，记录工程量变化、单价调整、金额变化；
* **签证单**：现场临时 / 零星 /附加工作，支持附件、审批与清单 / WBS 绑定。

通过变更与签证，系统实现：

* 合同价从“原合同” → “动态合同价”的合法调整；
* 五算偏差的来源可追溯（是量，是价，是变更，是签证，还是漏项）；
* 结算与审计过程中，附有完整的证据链条（单据 + 附件 + 审批记录）。

### 4.4 结算与决算：自动化与可审计

系统提供项目结算单模型，整合：

* 原合同工程量与金额
* 变更累计（量 / 价 / 合价）
* 签证累计金额
* 决算工程量与金额
* 审计扣减量 / 金额

形成最终结算价：

> 合同价 + 变更 + 签证 + 决算差额 + 规费税金 − 审计扣减 = 最终结算价

同时支持一键生成结算报告（PDF / Excel），便于对接业主、审计与监管部门。

---

## 5. 成本台账与利润分析中心

### 5.1 统一成本台账模型（project.cost.ledger）

系统采用**单表原子化成本台账**设计，记录所有成本事实：

* 归属：项目、公司
* 维度：WBS 结构（`structure_id`）、清单（`boq_line_id`）、成本科目（`cost_item_id`）
* 合同关系：收入合同 / 成本合同
* 来源：业务单据模型名、ID、单号
* 金额：数量、单价、不含税金额、税额、含税金额
* 标签：成本标签（如停工损失、赶工费、返工等）、AI 分类建议

通过这个统一台账，系统可以：

* 从任意 WBS 节点向下钻取，追踪每一笔成本；
* 基于科目 × WBS × 时间的多维透视，输出各种经营报表；
* 为 AI 成本分析与异常检测提供统一数据源。

### 5.2 成本科目与标签体系

* **科目维度**（结构化）：人工、材料、机械、分包、管理、财务等，采用字典表维护；
* **标签维度**（灵活）：赶工、停工、索赔、返工、安全事故、质量问题等，可多选叠加。

通过科目 + 标签，可以同时满足：
“会计视角要规范报表”与“经营视角要灵活分析”两类需求。

### 5.3 利润分析与项目经营视角

系统支持多种层级的利润分析：

* 项目级：合同收入、预算成本、实际成本、执行毛利及毛利率；
* WBS 级：专业 / 分部 / 清单项目的盈亏情况；
* 合同级：主合同 vs 分包合同的差额利润；
* 项目群级：各项目的规模 × 毛利率散点图、健康度排行等。

---

## 6. 五算对比体系：概算 / 预算 / 标后 / 合同 / 决算

### 6.1 五算设计理念

五算不是五张孤立的表，而是同一条清单 / WBS 记录上的五套“版本属性”：

* 概算（Estimate）
* 预算（Budget）
* 标后 / 投标（Post-bid）
* 合同（Contract）
* 决算（Final / Settlement）

系统在 `project.boq.line` 上统一存储五套版本的工程量、单价、合价，并在 WBS 节点上递归汇总，形成各层级的五算金额。

### 6.2 差异分析与可视化

对于每一个 WBS 节点 / 清单项，系统自动计算：

* 概算 vs 预算：前期控制与设计优化效果；
* 预算 vs 标后：投标策略与报价空间；
* 标后 vs 合同：谈判与合同签订差异；
* 合同 vs 决算：最终盈亏的量 / 价来源。

可视化手段：

* 五线图：展示同一项从概算到决算的金额演变曲线；
* 偏差热力图：决算超合同的节点用颜色凸显；
* 五算对比树：按 WBS 展开，逐级展示偏差来源。

---

## 7. 质量与安全一体化管理（QS 体系）

### 7.1 质量管理

核心对象：

* 检查（Inspection）
* 质量问题 / 不合格项（Issue / NCR）
* 整改（Rectification）
* 验收（Acceptance：工序 / 分项 / 分部 / 单位工程 / 竣工）

所有质量事件均绑定：

* `project_id`：项目
* `structure_id`：WBS 节点
* 可选 `boq_line_id`：细化到具体清单项

形成可统计的质量台账与质量地图（WBS 热力图）。

### 7.2 安全管理

核心对象：

* 危险源（Hazard）
* 安全隐患（Safety Issue）
* 整改闭环（Rectification）
* 安全事故（Accident）
* 安全教育与三级交底记录

同样全部绑定 WBS，支持风险矩阵（L×S）计算与安全风险热力图展示，并与进度 / 成本联动：

* 重大隐患未关闭 → 可配置禁止计量 / 停工；
* 停工造成的人工、机械、间接费用 → 计入成本预测；
* 多维度累积形成“安全健康度”指标。

---

## 8. AI 驱动的一体化项目经营驾驶舱

### 8.1 统一快照模型

系统围绕项目全局状态，设计统一快照模型（可选）：

* 进度：完成率、偏差、关键线路延误
* 质量：问题数量、严重程度、闭环率
* 安全：隐患数量、重大隐患、停工时长
* 成本：预算 / 合同 / 实际 / 预测、偏差
* 合同执行：变更金额、未批变更、结算进度、回款进度
* 分包与资源：分包履约、劳动力与机械利用率

该模型为 AI 提供标准化输入，输出项目健康度（0–100）、完工日期预测、完工成本预测以及风险与行动建议。

### 8.2 项目驾驶舱视图

**单项目视图：**

* 顶部 KPI 卡片：合同额、预算成本、实际成本、实际收入、执行毛利率、进度完成率、资料完备度、资金收支等；
* 中部图表：成本结构饼图、WBS 成本条形图、毛利趋势曲线、进度 vs 成本曲线；
* 底部列表：重大成本台账 TOP N、关键风险清单、缺失资料清单等。

**项目群视图：**

* 多项目列表：合同额、实际成本、收入、毛利率、进度偏差、健康度等；
* 组合图表：项目毛利 vs 规模散点图、项目健康度排名、资金压力雷达图、状态分布饼图等。

---

## 9. 技术架构与实施路线（概要）

### 9.1 技术架构（示意）

* **后端平台**：基于 Odoo / Python，采用模块化模型设计，支持 REST / JSON API；
* **前端平台**：支持 Web 端（Vue3）与移动端扩展，支持甘特图、图表与驾驶舱大屏；
* **数据层**：统一的 WBS / BOQ / 合同 / 台账 / 进度 / 质量 / 安全模型；
* **AI 层**：通过标准化快照与结构化数据，为大模型 / 专用算法提供输入与反馈通道。

### 9.2 实施阶段建议

1. **基础数据层落地**

   * 完成 WBS 树与 BOQ 导入；
   * 建立清单分类体系与结构生成算法。

2. **成本与合同体系接入**

   * 接入合同模型、成本台账模型；
   * 打通“清单 → 合同 → 台账”的数据链路。

3. **进度 / 质量 / 安全模块上线**

   * 建立与 WBS 绑定的进度记录、质量与安全事件；
   * 初步实现驾驶舱关键指标。

4. **五算对比与结算体系上线**

   * 完整实现五算字段与对比报表；
   * 接入变更 / 签证 / 结算流程，实现决算闭环。

5. **AI 决策与智能驾驶舱**

   * 基于既有数据资产接入 AI 分析；
   * 输出项目健康评分、完工日期 / 成本预测、风险与行动建议。

---

## 10. 价值总结

通过这一套“专业版 WBS 体系 + 全流程成本与合同管理 + 五算对比 + 质量安全 + AI 驾驶舱”的组合，产品可以为施工企业带来：

* **结构统一**：告别各部门各算各的，所有数据回到同一棵 WBS 树；
* **成本可控**：从预算到决算，成本偏差可实时监控、可追溯到清单 / 分包 / 材料；
* **进度透明**：进度不再停留在“感觉”，而是建立在计量和产值之上；
* **合同可管**：合同 / 变更 / 签证 / 结算一体化，形成完整证据链；
* **质量安全闭环**：实现从问题发现到整改闭环的数字化管理；
* **经营可视**：项目赚钱不赚钱、赚在哪里、亏在哪里，可以在驾驶舱一图看清；
* **AI 可用**：所有数据都是结构化的，企业具备了真正可用的“数据资产”，AI 不再停留在演示层面。

