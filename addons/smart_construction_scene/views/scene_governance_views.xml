<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="view_sc_scene_governance_log_tree" model="ir.ui.view">
    <field name="name">sc.scene.governance.log.tree</field>
    <field name="model">sc.scene.governance.log</field>
    <field name="arch" type="xml">
      <tree>
        <field name="created_at"/>
        <field name="action"/>
        <field name="company_id"/>
        <field name="from_channel"/>
        <field name="to_channel"/>
        <field name="actor_id"/>
        <field name="trace_id"/>
      </tree>
    </field>
  </record>

  <record id="view_sc_scene_governance_log_form" model="ir.ui.view">
    <field name="name">sc.scene.governance.log.form</field>
    <field name="model">sc.scene.governance.log</field>
    <field name="arch" type="xml">
      <form>
        <sheet>
          <group>
            <field name="action"/>
            <field name="company_id"/>
            <field name="from_channel"/>
            <field name="to_channel"/>
            <field name="actor_id"/>
            <field name="trace_id"/>
            <field name="created_at"/>
          </group>
          <group>
            <field name="reason"/>
            <field name="payload_json"/>
          </group>
        </sheet>
      </form>
    </field>
  </record>

  <record id="action_sc_scene_governance_log" model="ir.actions.act_window">
    <field name="name">Scene Governance Logs</field>
    <field name="res_model">sc.scene.governance.log</field>
    <field name="view_mode">tree,form</field>
  </record>

  <record id="view_sc_scene_company_channel_tree" model="ir.ui.view">
    <field name="name">sc.scene.company.channel.tree</field>
    <field name="model">sc.scene.company.channel</field>
    <field name="arch" type="xml">
      <tree editable="bottom">
        <field name="company_id"/>
        <field name="channel"/>
      </tree>
    </field>
  </record>

  <record id="action_sc_scene_company_channel" model="ir.actions.act_window">
    <field name="name">Scene Company Channels</field>
    <field name="res_model">sc.scene.company.channel</field>
    <field name="view_mode">tree</field>
  </record>

  <record id="view_sc_scene_governance_wizard_form" model="ir.ui.view">
    <field name="name">sc.scene.governance.wizard.form</field>
    <field name="model">sc.scene.governance.wizard</field>
    <field name="arch" type="xml">
      <form string="Scene Governance Action">
        <group>
          <field name="action"/>
          <field name="company_id" attrs="{'invisible':[('action','!=','switch_channel')], 'required':[('action','=','switch_channel')] }"/>
          <field name="channel" attrs="{'invisible':[('action','in',['pin_stable','rollback'])]}"/>
          <field name="reason"/>
        </group>
        <footer>
          <button string="Execute" type="object" name="action_execute" class="btn-primary"/>
          <button string="Cancel" class="btn-secondary" special="cancel"/>
        </footer>
      </form>
    </field>
  </record>

  <record id="action_sc_scene_governance_wizard" model="ir.actions.act_window">
    <field name="name">Scene Governance</field>
    <field name="res_model">sc.scene.governance.wizard</field>
    <field name="view_mode">form</field>
    <field name="target">new</field>
  </record>

  <menuitem id="menu_sc_scene_governance_root" name="Scene Governance" parent="smart_construction_core.menu_sc_scene_root" sequence="40"/>
  <menuitem id="menu_sc_scene_governance_action" name="Governance Actions" parent="menu_sc_scene_governance_root" action="action_sc_scene_governance_wizard" sequence="10"/>
  <menuitem id="menu_sc_scene_governance_company" name="Company Channels" parent="menu_sc_scene_governance_root" action="action_sc_scene_company_channel" sequence="20"/>
  <menuitem id="menu_sc_scene_governance_logs" name="Governance Logs" parent="menu_sc_scene_governance_root" action="action_sc_scene_governance_log" sequence="30"/>
</odoo>
