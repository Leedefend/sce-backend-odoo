<odoo>
    <!-- 合同 / 资金 / 结算 域 actions 补充 groups 防止 URL 绕过 -->

    <!-- 合同域 -->
    <record id="action_construction_contract" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_contract_user')), (4, ref('smart_construction_core.group_sc_cap_contract_manager'))]"/>
    </record>
    <record id="action_construction_contract_income" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_contract_user')), (4, ref('smart_construction_core.group_sc_cap_contract_manager'))]"/>
    </record>
    <record id="action_construction_contract_expense" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_contract_user')), (4, ref('smart_construction_core.group_sc_cap_contract_manager'))]"/>
    </record>
    <record id="action_construction_contract_line" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_contract_user')), (4, ref('smart_construction_core.group_sc_cap_contract_manager'))]"/>
    </record>
    <record id="action_project_contract_overview" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_contract_user')), (4, ref('smart_construction_core.group_sc_cap_contract_manager'))]"/>
    </record>

    <!-- 资金 / 付款申请 -->
    <record id="action_payment_request" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_finance_user')), (4, ref('smart_construction_core.group_sc_cap_finance_manager'))]"/>
    </record>
    <record id="action_sc_tier_review_my_payment_request" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_finance_manager'))]"/>
    </record>

    <!-- 结算域 -->
    <record id="action_sc_settlement_order" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_settlement_user')), (4, ref('smart_construction_core.group_sc_cap_settlement_manager'))]"/>
    </record>
    <!-- support 目录内的结算 action 也补齐 -->
    <record id="action_sc_settlement_order" model="ir.actions.act_window" context="{'force_reload': True}">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_settlement_user')), (4, ref('smart_construction_core.group_sc_cap_settlement_manager'))]"/>
    </record>

    <!-- Batch-2：预算/成本域（统一 canonical 到 cost_domain 版本的 action） -->
    <!-- 预算 -->
    <record id="action_project_budget" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <!-- 成本科目 -->
    <record id="action_project_cost_code" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_config_admin'))]"/>
    </record>
    <!-- 成本对比 / 利润对比 -->
    <record id="action_project_cost_compare" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <record id="action_project_profit_compare" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <!-- 成本台账 -->
    <record id="action_project_cost_ledger" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <!-- 预算分摊 -->
    <record id="action_project_budget_cost_alloc" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <!-- BOQ 相关（工程量清单） -->
    <record id="action_project_boq_line" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <record id="action_project_boq_line_analysis" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <!-- WBS / 进度计量 -->
    <record id="action_project_wbs" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <record id="action_project_progress_entry" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <!-- 快速入口（项目表单按钮用） -->
    <record id="action_project_budget_quick" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <record id="action_project_cost_ledger_quick" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <record id="action_project_progress_quick" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>

    <!-- Batch-3：物资 / 采购域 -->
    <record id="action_project_material_plan" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_material_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_material_manager'))]"/>
    </record>
    <record id="action_sc_tier_review_my_material_plan" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_material_manager'))]"/>
    </record>
    <record id="action_project_boq_import_wizard" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <record id="action_project_task_from_boq_wizard" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_cost_manager'))]"/>
    </record>
    <record id="action_work_breakdown" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_project_user')),
                                      (4, ref('smart_construction_core.group_sc_cap_project_manager'))]"/>
    </record>

    <!-- Batch-4：字典 / 工作流 / 运营指标 / 文档 / 驾驶舱 / 资金报表 -->
    <!-- 字典子动作：与数据域一致 -->
    <record id="action_project_dictionary_discipline" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_data_read'))]"/>
    </record>
    <record id="action_project_dictionary_chapter" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_data_read'))]"/>
    </record>
    <record id="action_project_dictionary_quota_item" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_data_read'))]"/>
    </record>
    <record id="action_project_dictionary_sub_item" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_data_read'))]"/>
    </record>
    <record id="action_project_quota_subitem" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_data_read'))]"/>
    </record>
    <record id="action_project_quota_tree" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_data_read'))]"/>
    </record>
    <record id="action_quota_import_wizard" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_config_admin'))]"/>
    </record>

    <!-- 工作流 -->
    <record id="action_sc_workflow_def" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_config_admin'))]"/>
    </record>
    <record id="action_sc_workflow_instance" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_config_admin'))]"/>
    </record>
    <record id="action_sc_workflow_workitem" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_config_admin'))]"/>
    </record>
    <record id="action_sc_workflow_log" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_config_admin'))]"/>
    </record>

    <!-- 运营指标 / 驾驶舱 / 财务报表 -->
    <record id="action_sc_operating_metrics_project" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_cost_user'))]"/>
    </record>
    <record id="action_sc_operating_drill_settlements" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_finance_user')), (4, ref('smart_construction_core.group_sc_cap_finance_manager'))]"/>
    </record>
    <record id="action_sc_operating_drill_overpay_risk_pr" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_finance_user')), (4, ref('smart_construction_core.group_sc_cap_finance_manager'))]"/>
    </record>
    <record id="action_project_dashboard" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_project_read'))]"/>
    </record>
    <record id="action_sc_treasury_ledger" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_finance_user')), (4, ref('smart_construction_core.group_sc_cap_finance_manager'))]"/>
    </record>

    <!-- 文档 -->
    <record id="action_sc_project_document" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_project_read'))]"/>
    </record>

    <!-- 投标 -->
    <record id="action_tender_bid" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_project_read'))]"/>
    </record>

    <!-- 物资：生成询价单向导 -->
    <record id="action_material_plan_to_rfq_wizard" model="ir.actions.act_window">
        <field name="groups_id" eval="[
            (4, ref('smart_construction_core.group_sc_cap_material_user')),
            (4, ref('smart_construction_core.group_sc_cap_material_manager'))
        ]"/>
    </record>

    <!-- 项目：工程结构（清单 WBS） -->
    <record id="action_sc_project_structure" model="ir.actions.act_window">
        <field name="groups_id" eval="[
            (4, ref('smart_construction_core.group_sc_cap_cost_user')),
            (4, ref('smart_construction_core.group_sc_cap_cost_manager'))
        ]"/>
    </record>
    <record id="project.open_view_project_all" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_project_read'))]"/>
    </record>

    <!-- Project: share / message actions (keep within project center users) -->
    <record id="project.action_send_mail_project_project" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_super_admin')), (4, ref('base.group_system'))]"/>
    </record>
    <record id="project_sms.project_project_act_window_sms_composer" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_super_admin')), (4, ref('base.group_system'))]"/>
    </record>
    <record id="project.project_share_wizard_action" model="ir.actions.act_window">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_super_admin')), (4, ref('base.group_system'))]"/>
    </record>

    <!-- 物资：审批回调 server action -->
    <record id="server_action_material_plan_tier_approved" model="ir.actions.server">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_material_manager'))]"/>
    </record>
    <record id="server_action_material_plan_tier_rejected" model="ir.actions.server">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_material_manager'))]"/>
    </record>

    <!-- 财务：付款申请审批回调 server action -->
    <record id="server_action_payment_request_on_approved" model="ir.actions.server">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_finance_manager'))]"/>
    </record>
    <record id="server_action_payment_request_on_rejected" model="ir.actions.server">
        <field name="groups_id" eval="[(4, ref('smart_construction_core.group_sc_cap_finance_manager'))]"/>
    </record>

  <data noupdate="1">

    <!-- ===== Settings / Configuration (lock to System Settings) ===== -->
    <record id="base_setup.action_general_configuration" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_super_admin')])]"/>
    </record>

    <record id="account.action_account_config" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_super_admin')])]"/>
    </record>

    <record id="project.project_config_settings_action" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_super_admin')])]"/>
    </record>

    <record id="stock.action_stock_config_settings" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_super_admin')])]"/>
    </record>

    <record id="purchase.action_purchase_configuration" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_super_admin')])]"/>
    </record>

    <!-- ===== Master data / journals (usually also settings-level) ===== -->
    <record id="account.action_incoterms_tree" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_cap_finance_manager')])]"/>
    </record>

    <record id="account.action_account_journal_form" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_cap_finance_manager')])]"/>
    </record>

    <record id="account.action_account_journal_group_list" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_cap_finance_manager')])]"/>
    </record>

    <!-- ===== Stock business actions (lock to stock users) ===== -->
    <record id="stock.action_replenishment" model="ir.actions.server">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_cap_material_manager')])]"/>
    </record>

    <record id="stock.action_picking_tree_incoming" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('stock.group_stock_user')])]"/>
    </record>

    <record id="stock.action_picking_tree_outgoing" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('stock.group_stock_user')])]"/>
    </record>

    <!-- ===== Digest (usually settings-level) ===== -->
    <record id="digest.digest_digest_action" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_super_admin')])]"/>
    </record>

    <record id="digest.digest_tip_action" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('smart_construction_core.group_sc_super_admin')])]"/>
    </record>

    <!-- ===== Purchase report (at least purchase user) ===== -->
    <record id="purchase.action_purchase_order_report_all" model="ir.actions.act_window">
      <field name="groups_id" eval="[(6, 0, [ref('purchase.group_purchase_user')])]"/>
    </record>

  </data>
</odoo>
