FROM ubuntu:22.04

ARG DEBIAN_FRONTEND=noninteractive

# 基础工具链（团队开发必备）
RUN apt-get update && apt-get install -y --no-install-recommends \
    git \
    make \
    curl \
    ca-certificates \
    gnupg \
    lsb-release \
    bash \
    tzdata \
    openssh-client \
    python3 \
    python3-pip \
    docker.io \
    docker-compose \
    # 终端工具，解决屏幕闪烁问题
    ncurses-term \
    screen \
    tmux \
    vim \
 && rm -rf /var/lib/apt/lists/*

# 创建开发用户（与你现在习惯一致：odoo:1000）
RUN useradd -m -u 1000 -s /bin/bash odoo \
 && mkdir -p /workspaces \
 && chown -R odoo:odoo /workspaces

# 复制bash配置文件
COPY bashrc /home/odoo/.bashrc
RUN chown odoo:odoo /home/odoo/.bashrc

USER odoo
WORKDIR /workspaces

CMD ["bash", "-lc", "sleep infinity"]
