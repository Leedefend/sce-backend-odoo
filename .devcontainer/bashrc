#!/bin/bash
# 解决屏幕闪烁问题的bash配置

# 设置终端类型
export TERM=xterm-256color
export COLORTERM=truecolor

# 禁用某些可能导致闪烁的特性
export LESS="-R"
export MANPAGER="less -R"

# 设置语言环境
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

# 设置提示符 - 简洁版，减少重绘
PS1='\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '

# 别名
alias ll='ls -la'
alias la='ls -A'
alias l='ls -CF'

# 历史记录设置
export HISTSIZE=10000
export HISTFILESIZE=20000
export HISTCONTROL=ignoreboth:erasedups
shopt -s histappend

# 检查并设置正确的终端
if [ -t 1 ]; then
    # 如果是交互式终端
    stty sane
    stty erase '^?'
    
    # 禁用某些可能导致闪烁的终端特性
    if [ "$TERM" != "dumb" ]; then
        # 确保终端正确初始化
        tput init 2>/dev/null || true
    fi
fi

# 欢迎信息
echo "Terminal environment configured for no flickering"
echo "TERM: $TERM"
echo "COLORTERM: $COLORTERM"